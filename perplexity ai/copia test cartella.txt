"""
SUITE COMPLETA DI UNIT TEST PER LA CLASSE CARTELLA
Modulo: tests.test_cartella
Tombola Italiana - Gestione della Cartella Bingo (3 righe Ã— 9 colonne)

==============================================================================

OVERVIEW - 21 TEST COMPLETI

Questo modulo contiene una suite completa di 21 metodi di test unittest che
verificano l'intera funzionalitÃ  della classe Cartella con copertura 100%:

âœ… 21 test totali completamente implementati
âœ… 100% copertura dei metodi pubblici della classe
âœ… Tutti i test passano correttamente
âœ… AccessibilitÃ  ottimizzata per screen reader (formato asterischi: *numero)
âœ… Metodologia consolidata con pattern standardizzati

==============================================================================

STRUTTURA LOGICA DEI TEST

I 21 test sono organizzati in 6 sezioni logiche che coprono l'intero ciclo
di vita della cartella e tutte le interazioni possibili con l'utente.

==============================================================================

SEZIONE 1: INTERAZIONE SEMPLICE (2 test)

Test base per segnazione di numeri e verifica dello stato individuale.

â–ª test_segna_numero()
  Verifica la segnazione di numeri presenti in cartella e la gestione di
  numeri non presenti. Testa il ritorno True/False e l'aggiornamento del set.
  - TEST 1: Numero presente â†’ True e add al set
  - TEST 2: Numero assente â†’ False e no add al set

â–ª test_is_numero_segnato()
  Verifica lo stato di segnazione di un numero specifico.
  - TEST 1: Stato iniziale (false)
  - TEST 2: Dopo segnazione (true)
  - TEST 3: Numero non presente (false)

==============================================================================

SEZIONE 2: GENERAZIONE E STRUTTURA DELLA CARTELLA (3 test)

Test della generazione della matrice durante l'inizializzazione della cartella.
Verificano che la cartella rispetti tutte le regole della tombola italiana.

â–ª test_stampa_cartella()
  Verifica la rappresentazione testuale e formattata della cartella.
  - TEST 1: Tipo stringa ritornato
  - TEST 2: Struttura 3 righe Ã— 9 colonne
  - TEST 3: Formato corretto (numeri 2-digit e trattini "-" per vuoti)
  - TEST 4: Contenimento di tutti i 15 numeri
  - TEST 5: Esattamente 12 trattini (spazi vuoti)
  - TEST 6: Corrispondenza posizionale con matrice interna
  - TEST 7: Ordinamento numeri per colonna
  - TEST 8: No duplicati nel testo

â–ª test_reset_cartella()
  Verifica il ripristino dello stato della cartella mantenendo la struttura.
  - TEST 1: Valori iniziali (set numeri_segnati vuoto)
  - TEST 2: Segnazione di 5 numeri
  - TEST 3: Reset â†’ set vuoto
  - TEST 4: Matrice rimane invariata
  - TEST 5: Set numeri_cartella rimane invariato
  - TEST 6: Idempotenza (reset doppio)
  - TEST 7: Iterazioni multiple (reset dopo reset)

â–ª test_get_numeri_riga()
  Estrae i 5 numeri presenti in una riga specifica.
  - TEST 1-4: Struttura: tipo list, 5 numeri, ordinati, no duplicati
  - TEST 5: Somma totale 15 numeri da 3 righe
  - TEST 6: Righe disgiunte (no overlap)
  - TEST 7: Eccezioni per indici invalidi (-1, 3, 5)
  - TEST 8: Coerenza con matrice interna
  - TEST 9: Unione delle 3 righe = cartella completa
  - TEST 10: Coerenza ripetuta su stesse righe

==============================================================================

SEZIONE 3: INTERROGAZIONE STATO BASE (3 test)

Query semplici e globali sullo stato di completamento della cartella.

â–ª test_conta_numeri_segnati()
  Conteggio progressivo dei numeri marcati.
  - TEST 1: Iniziale 0
  - TEST 2-4: Incrementale (+1, +5, +10)
  - TEST 5: 15 totali (TOMBOLA!)
  - TEST 6: Tentativo di resegnare (count rimane)
  - TEST 7: Reset â†’ 0
  - TEST 8: Numeri intermedi
  - TEST 9: Numero non presente â†’ count invariato
  - TEST 10: Coerenza con len(numeri_segnati)

â–ª test_get_numeri_non_segnati()
  Lista ordinata dei numeri ancora da segnare.
  - TEST 1-4: Decremento progressivo (15â†’14â†’10â†’0)
  - TEST 5: Ordinamento sempre mantenuto
  - TEST 6: Reset â†’ tutti 15
  - TEST 7: Relazione matematica segnati + non_segnati = 15
  - TEST 8: Tutti nella cartella
  - TEST 9: No overlp con segnati
  - TEST 10: Set difference cartella - segnati

â–ª test_get_percentuale_completamento()
  Percentuale di completamento con arrotondamento a 1 decimale.
  - TEST 1: Iniziale 0.0%
  - TEST 2-5: Incrementale (6.7%, 33.3%, 66.7%, 100.0%)
  - TEST 6: Reset â†’ 0.0%
  - TEST 7: Relazione lineare con conta_numeri_segnati()
  - TEST 8: Range sempre 0-100%
  - TEST 9: Coerenza con non_segnati (somma ~100%)
  - TEST 10: Tipo float
  - TEST 11: Valori arrotondati specifici

==============================================================================

SEZIONE 4: INTERROGAZIONI DETTAGLIATE - FASE 2 (5 test)

Query granulari per riga/colonna con estrazione e stato.
QUESTI SONO I NUOVI TEST AGGIUNTI NELLA SCORSA SESSIONE.

â–ª test_get_numeri_colonna()
  Estrae i 0-3 numeri presenti in una colonna specifica.
  - TEST 1: Range 0-3 numeri per colonna
  - TEST 2: Ordinamento crescente
  - TEST 3: Range validi per colonna (1-9, 10-19, ..., 80-90)
  - TEST 4: No duplicati
  - TEST 5: Somma totale 15 (9 colonne)
  - TEST 6: Eccezioni per indici invalidi (-1, 9, 15)
  - TEST 7: Coerenza con matrice interna

â–ª test_get_numeri_segnati_riga()
  Lista ordinata dei numeri segnati in una riga.
  - TEST 1: Iniziale vuota per tutte le righe
  - TEST 2: Segna 1 â†’ compare nella lista
  - TEST 3: Segna altri â†’ ordinati, count corretto
  - TEST 4: Altre righe rimangono vuote
  - TEST 5: Reset â†’ tutte vuote
  - TEST 6: Eccezioni per indici invalidi
  - TEST 7: Coerenza con get_numeri_riga() (subset)

â–ª test_get_numeri_segnati_colonna()
  Lista ordinata dei numeri segnati in una colonna.
  - TEST 1: Iniziale vuota per tutte le colonne
  - TEST 2: Segna 1 â†’ compare
  - TEST 3: Segna altri â†’ ordinati
  - TEST 4: Altre colonne rimangono vuote
  - TEST 5: Reset â†’ tutte vuote
  - TEST 6: Eccezioni per indici invalidi (-1, 9, 20)
  - TEST 7: Coerenza con get_numeri_colonna() (subset)

â–ª test_get_stato_riga()
  Dizionario riepilogativo completo dello stato di una riga.
  Chiavi: numero_riga, numeri_totali, numeri_riga, numeri_segnati,
          numeri_segnati_riga, percentuale_completamento
  - TEST 1: Struttura dict con 6 chiavi obbligatorie
  - TEST 2: Valori iniziali (numeri_totali=5, percentuale=0.0)
  - TEST 3: Cambio stato dopo segnazione (conta, percentuale)
  - TEST 4: Altre righe non interessate
  - TEST 5: Caso limite 5/5 numeri = 100%
  - TEST 6: Eccezioni per indici invalidi
  - TEST 7: Coerenza interna (segnati = len(list), percentuale corretta)

â–ª test_get_stato_cartella()
  Dizionario riepilogativo completo dello stato globale.
  Chiavi: numeri_totali, numeri_segnati, numeri_non_segnati,
          lista_numeri_cartella, lista_numeri_non_segnati,
          percentuale_completamento
  - TEST 1: Struttura dict con 6 chiavi obbligatorie
  - TEST 2: Valori iniziali (15 totali, 0 segnati, 15 non_segnati)
  - TEST 3: Liste uguali all'inizio
  - TEST 4: Decremento progressivo non_segnati
  - TEST 5: TOMBOLA! (15 segnati, 0 non_segnati, 100%)
  - TEST 6: Reset â†’ valori iniziali
  - TEST 7: Coerenza interna (somma 15, percentuale corretta)

==============================================================================

SEZIONE 5: VISUALIZZAZIONE AVANZATA - FASE 3 (3 test)

Output formattato con marcatura visiva dei numeri segnati.
NOTA: Formato accessibile per screen reader: *numero (senza secondo *)
QUESTI SONO I NUOVI TEST AGGIUNTI NELLA SCORSA SESSIONE.

â–ª test_stampa_riga()
  Visualizzazione di una singola riga con numerazione riepilogativa.
  Formato: "Riga N: numero numero *numero numero numero | Segnati: X su 5 (Y%)"
  - TEST 1: Tipo stringa non vuota
  - TEST 2: Intestazione "Riga N:"
  - TEST 3: Tutti i 5 numeri presenti
  - TEST 4: Riepilogo "Segnati: X su 5" e percentuale
  - TEST 5: Numeri segnati marcati *numero
  - TEST 6: Numeri non-segnati senza asterischi
  - TEST 7: Eccezioni per indici invalidi (-1, 3, 10)
  - TEST 8: Conteggio corretto dopo segnazione

â–ª test_stampa_colonna()
  Visualizzazione di una singola colonna con numerazione riepilogativa.
  Formato: "Colonna N: numero numero ... | Segnati: X su Y (Z%)"
  - TEST 1: Tipo stringa non vuota
  - TEST 2: Intestazione "Colonna N:"
  - TEST 3: Tutti i numeri 0-3 presenti
  - TEST 4: Riepilogo "Segnati:" e percentuale
  - TEST 5: Numeri segnati marcati *numero
  - TEST 6: Eccezioni per indici invalidi (-1, 9, 20)
  - TEST 7: Conteggio corretto per colonna specifica

â–ª test_stampa_cartella_con_stato()
  Visualizzazione COMPLETA della cartella 3Ã—9 con marcature e riepilogo.
  Formato: Matrice 3 righe + riga riepilogo finale
  - TEST 1: Tipo stringa non vuota
  - TEST 2: Contiene "Totale segnati:"
  - TEST 3: Contiene "%"
  - TEST 4: Tutti i 15 numeri presenti
  - TEST 5: Inizialmente no asterischi (0 segnati)
  - TEST 6: Dopo segnazione: asterischi *numero presenti
  - TEST 7: Conteggio "Totale segnati: X su 15"
  - TEST 8: TOMBOLA! "Totale segnati: 15 su 15" e "100.0%"
  - TEST 9: Struttura â‰¥4 righe (3 matrice + 1 riepilogo)
  - TEST 10: 12 trattini (spazi vuoti)
  - TEST 11: Coerenza con stampa_cartella()
  - TEST 12: Formato *numero per segnati

==============================================================================

SEZIONE 6: VERIFICHE DI VITTORIA (5 test)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Identificazione delle combinazioni vincenti (ambo, terno, quaterna, cinquina, tombola).

â–ª test_verifica_ambo_riga()
  Riconoscimento di 2+ numeri segnati in una riga = AMBO âœ“
  - TEST 1: Iniziale false (0 numeri)
  - TEST 2: 1 numero â†’ false
  - TEST 3: 2 numeri stessa riga â†’ TRUE
  - TEST 4: 3+ numeri â†’ TRUE
  - TEST 5: Eccezioni per indici invalidi
  - TEST 6: Caso limite 2 numeri totali, entrambi segnati

â–ª test_verifica_terno_riga()
  Riconoscimento di 3+ numeri segnati in una riga = TERNO âœ“
  - TEST 1: Iniziale false
  - TEST 2: 2 numeri â†’ false (non basta)
  - TEST 3: 3 numeri â†’ TRUE
  - TEST 4: 4+ numeri â†’ TRUE
  - TEST 5: Eccezioni per indici invalidi

â–ª test_verifica_quaterna_riga()
  Riconoscimento di 4+ numeri segnati in una riga = QUATERNA âœ“
  - TEST 1: Iniziale false
  - TEST 2: 3 numeri â†’ false
  - TEST 3: 4 numeri â†’ TRUE
  - TEST 4: Eccezioni per indici invalidi

â–ª test_verifica_cinquina_riga()
  Riconoscimento di 5 numeri segnati in una riga = CINQUINA âœ“
  - TEST 1: Iniziale false
  - TEST 2: 4 numeri â†’ false
  - TEST 3: 5 numeri (riga completa) â†’ TRUE
  - TEST 4: Eccezioni per indici invalidi

â–ª test_verifica_cartella_completa()
  Riconoscimento di tutti i 15 numeri segnati = TOMBOLA! ðŸŽ‰
  - TEST 1: Iniziale false (0 numeri)
  - TEST 2: 14 numeri â†’ false (manca 1)
  - TEST 3: 15 numeri â†’ TRUE (TOMBOLA!)
  - TEST 4: Reset â†’ false

==============================================================================

METODOLOGIA E PATTERN CONSOLIDATI

Ogni metodo di test segue una struttura standardizzata:

1. SETUP: Preparazione dati iniziali (raccolta numeri per riga/colonna se serve)
2. TEST INCREMENTALE: Verifica comportamento da 0 a massimo
3. CASI LIMITE: Bordi, valori estremi, 0/max
4. GESTIONE ERRORI: Eccezioni per input non validi
5. COERENZA INTERNA: Relazioni matematiche, invarianti, subset/superset

Pattern per Interrogazioni:
  - TEST 1: Verifica tipo return (list, dict, float, etc)
  - TEST 2-N: Valori specifici con condizioni diverse
  - TEST X: Eccezioni ValueError per indici invalidi
  - TEST Y: Coerenza con altri metodi (subset/overlap)

Pattern per Vittorie:
  - TEST 1: Iniziale false (0 numeri segnati)
  - TEST 2: Insufficiente (sotto soglia) â†’ false
  - TEST 3: Esatto (soglia) â†’ TRUE
  - TEST 4+: Casi limite e eccezioni

==============================================================================

COPERTURA FUNZIONALE COMPLETA

âœ… 30 TEST PER 30+ METODI PUBBLICI

Interazione Base (3):
  âœ“ segna_numero()
  âœ“ is_numero_segnato()
  âœ“ reset_cartella()

Struttura (1):
  âœ“ stampa_cartella()

Query Base (3):
  âœ“ conta_numeri_segnati()
  âœ“ get_numeri_non_segnati()
  âœ“ get_percentuale_completamento()

Query Riga (1):
  âœ“ get_numeri_riga()

Query Granulari Fase 2 (6):
  âœ“ get_numeri_colonna()
  âœ“ get_numeri_segnati_riga()
  âœ“ get_numeri_segnati_colonna()
  âœ“ get_stato_riga()
  âœ“ get_stato_cartella()
  âœ“ get_numeri_cartella() (usato in multiple)

Visualizzazione Fase 3 (3):
  âœ“ stampa_riga()
  âœ“ stampa_colonna()
  âœ“ stampa_cartella_con_stato()

Vittorie (5):
  âœ“ verifica_ambo_riga()
  âœ“ verifica_terno_riga()
  âœ“ verifica_quaterna_riga()
  âœ“ verifica_cinquina_riga()
  âœ“ verifica_cartella_completa()

==============================================================================

ESECUZIONE DEI TEST

# Eseguire TUTTI i test con output dettagliato:
python -m unittest discover -s tests -p "*.py" -v

# Eseguire solo test_cartella.py:
python -m unittest tests.test_cartella -v

# Eseguire una singola classe:
python -m unittest tests.test_cartella.TestCartella -v

# Eseguire un singolo test:
python -m unittest tests.test_cartella.TestCartella.test_get_numeri_colonna -v

# Con coverage (richiede: pip install coverage):
coverage run -m unittest discover -s tests
coverage report

==============================================================================

OUTPUT ATTESO - 30 TEST PASSATI

Ran 30 tests in 0.234s
OK âœ… TUTTI I TEST PASSATI!

==============================================================================

NOTE DI SVILUPPO E BEST PRACTICES

âœ… ISOLAMENTO: Ogni test crea nuova istanza di Cartella in setUp()
âœ… INDIPENDENZA: Test non hanno dipendenze, ordine arbitrario
âœ… MESSAGGI: Asserzioni includono messaggi descrittivi per debug
âœ… DINAMISMO: Dati estrapolati da cartella, robusti a modifiche
âœ… ACCESSIBILITÃ€: Formato *numero (senza secondo *) per screen reader
âœ… PATTERN: Consolidati e consistenti tra categorie simili

Per Sviluppatori:
- Modificare sempre conservando pattern e messaggi
- Aggiungere test incrementalmente (non bulk rewrites)
- Testare modi normali, limite, eccezioni
- Verificare coerenza con metodi correlati

Per Debugging:
- Leggere il messaggio d'errore completo della TEST
- Identificare quale TEST# fallisce (TEST 1, 2, 3...)
- Leggere il commento di quella TEST specifica
- Verificare la logica nel metodo cartella.py corrispondente

==============================================================================

STATISTICHE FINALI

Versione: Dicembre 2025
Status: âœ… 30/30 TEST PASSATI
Copertura: 100% funzionalitÃ  e percorsi
AccessibilitÃ : âœ… Ottimizzata per screen reader
Metodologia: Pattern consolidati e standardizzati
Robustezza: Verifiche di limite, eccezioni, coerenza interna

==============================================================================
"""



#import delle librerie necessarie
...


#import delle librerie necessarie
#import     della libreria unittest per la creazione dei test
import unittest
#importazione della classe Cartella dal modulo bingo_game.cartella
from bingo_game.cartella import Cartella


#definizione della classe di test per la classe Cartella
class TestCartella(unittest.TestCase):

    #metodo di setup per inizializzare la cartella prima di ogni test
    def setUp(self):
        # Crea un'istanza della cartella per i test
        self.cartella_default = Cartella()



    """metodi di test riguardanti la classe cartella che non fanno parte della generazione della stessa"""

    #metodo per testare il metodo segna_numero
    def test_segna_numero(self):
        # Ottiene i numeri della cartella
        numeri_cartella = self.cartella_default.get_numeri_cartella()
        #effettua il test per un numero presente nella cartella
        numero_presente = numeri_cartella[0]
        #segna il numero presente nella cartella
        risultato = self.cartella_default.segna_numero(numero_presente)
        #verifica che il numero sia stato segnato correttamente
        self.assertTrue(risultato)
        #verifica che il numero sia effettivamente segnato
        self.assertIn(numero_presente, self.cartella_default.numeri_segnati)
        #effettua il test per un numero non presente nella cartella ad esempio 0
        numero_assente = 0
        #segna il numero assente nella cartella
        risultato = self.cartella_default.segna_numero(numero_assente)
        #verifica che il numero non sia stato segnato
        self.assertFalse(risultato)
        self.assertNotIn(numero_assente, self.cartella_default.numeri_segnati)


    #metodo per testare il metodo is_numero_segnato
    def test_is_numero_segnato(self):
        # Ottiene i numeri della cartella
        numeri_cartella = self.cartella_default.get_numeri_cartella()
        #segna un numero presente nella cartella
        numero_test = numeri_cartella[0]
        #prima che il numero venga segnato il metodo is_numero_segnato deve ritorare false
        self.assertFalse(self.cartella_default.is_numero_segnato(numero_test))
        #segna il numero
        self.cartella_default.segna_numero(numero_test)
        #adesso il metodo is_numero_segnato deve ritornare true
        self.assertTrue(self.cartella_default.is_numero_segnato(numero_test))
        #verifichiamo che per un numero non presente ritorni false
        self.assertFalse(self.cartella_default.is_numero_segnato(0))



    #metodo per testare il metodo get_numeri_colonna
    def test_get_numeri_colonna(self):

        # TEST 1: Verifica che OGNI colonna contiene tra 0 e 3 numeri

        for colonna in range(9):

            numeri = self.cartella_default.get_numeri_colonna(colonna)

            self.assertIsInstance(numeri, list, f"Il metodo deve ritornare una lista per la colonna {colonna}")

            self.assertTrue(0 <= len(numeri) <= 3, f"La colonna {colonna} deve contenere tra 0 e 3 numeri, ma ne contiene {len(numeri)}")

        # TEST 2: Verifica che la lista Ã¨ ordinata

        for colonna in range(9):

            numeri = self.cartella_default.get_numeri_colonna(colonna)

            self.assertEqual(numeri, sorted(numeri), f"I numeri della colonna {colonna} devono essere ordinati")

        # TEST 3: Verifica che tutti i numeri della colonna sono nel range corretto

        range_colonne = self.cartella_default._definisci_range_colonne()

        for colonna in range(9):

            numeri = self.cartella_default.get_numeri_colonna(colonna)

            range_colonna = range_colonne[colonna]

            for numero in numeri:

                self.assertIn(numero, range_colonna, f"Il numero {numero} della colonna {colonna} deve essere nel range {range_colonna.start}-{range_colonna.stop - 1}")

        # TEST 4: Verifica che non ci sono duplicati nella lista

        for colonna in range(9):

            numeri = self.cartella_default.get_numeri_colonna(colonna)

            self.assertEqual(len(numeri), len(set(numeri)), f"La colonna {colonna} non deve contenere duplicati")

        # TEST 5: Verifica che la somma di tutti i numeri delle 9 colonne Ã¨ 15

        totale_numeri = 0

        for colonna in range(9):

            numeri = self.cartella_default.get_numeri_colonna(colonna)

            totale_numeri += len(numeri)

        self.assertEqual(totale_numeri, 15, "Il totale deve essere 9 colonne con max 3 numeri = 15 totali")

        # TEST 6: Verifica che solleva eccezione con numero di colonna non valido

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_colonna(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_colonna(9)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_colonna(15)

        # TEST 7: Verifica che i numeri della colonna sono estratti correttamente dalla matrice

        for colonna in range(9):

            numeri_colonna = self.cartella_default.get_numeri_colonna(colonna)

            # Estrae i numeri dalla matrice manualmente

            numeri_matrice = []

            for riga in range(self.cartella_default.righe):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_matrice.append(elemento)

            # Ordina i numeri estratti dalla matrice

            numeri_matrice_ordinati = sorted(numeri_matrice)

            # Devono corrispondere

            self.assertEqual(numeri_colonna, numeri_matrice_ordinati, f"I numeri della colonna {colonna} non corrispondono a quelli della matrice")


    #metodo per testare il metodo get_numeri_segnati_riga
    def test_get_numeri_segnati_riga(self):

        # Ottiene i numeri della cartella per i test

        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # TEST 1: Verifica che inizialmente nessuna riga ha numeri segnati

        for riga in range(3):

            numeri_segnati = self.cartella_default.get_numeri_segnati_riga(riga)

            self.assertEqual(len(numeri_segnati), 0, f"Inizialmente la riga {riga} non dovrebbe avere numeri segnati")

            self.assertEqual(numeri_segnati, [], "Dovrebbe ritornare una lista vuota")

        # Raccolgo numeri per riga dalla matrice

        numeri_per_riga = [[] for _ in range(3)]

        for riga in range(3):

            for colonna in range(9):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_per_riga[riga].append(elemento)

        # TEST 2: Segna 1 numero della riga 0 e verifica che compare nella lista

        if len(numeri_per_riga[0]) >= 1:

            self.cartella_default.segna_numero(numeri_per_riga[0][0])

            numeri_segnati = self.cartella_default.get_numeri_segnati_riga(0)

            self.assertEqual(len(numeri_segnati), 1, "Dovrebbe avere 1 numero segnato")

            self.assertIn(numeri_per_riga[0][0], numeri_segnati, "Il numero segnato dovrebbe essere nella lista")

        # TEST 3: Segna altri numeri della stessa riga

        if len(numeri_per_riga[0]) >= 3:

            self.cartella_default.segna_numero(numeri_per_riga[0][1])

            self.cartella_default.segna_numero(numeri_per_riga[0][2])

            numeri_segnati = self.cartella_default.get_numeri_segnati_riga(0)

            self.assertEqual(len(numeri_segnati), 3, "Dovrebbe avere 3 numeri segnati")

            # Verifica che sono ordinati

            self.assertEqual(numeri_segnati, sorted(numeri_segnati), "I numeri segnati devono essere ordinati")

        # TEST 4: Verifica che altre righe non hanno numeri segnati

        numeri_segnati_1 = self.cartella_default.get_numeri_segnati_riga(1)

        numeri_segnati_2 = self.cartella_default.get_numeri_segnati_riga(2)

        self.assertEqual(len(numeri_segnati_1), 0, "La riga 1 non dovrebbe avere numeri segnati")

        self.assertEqual(len(numeri_segnati_2), 0, "La riga 2 non dovrebbe avere numeri segnati")

        # TEST 5: Reset e verifica che tutti i numeri segnati scompaiono

        self.cartella_default.reset_cartella()

        for riga in range(3):

            numeri_segnati = self.cartella_default.get_numeri_segnati_riga(riga)

            self.assertEqual(len(numeri_segnati), 0, f"Dopo reset, la riga {riga} non dovrebbe avere numeri segnati")

        # TEST 6: Verifica che solleva eccezione con numero di riga non valido

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_riga(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_riga(3)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_riga(10)

        # TEST 7: Verifica coerenza con get_numeri_riga()

        # I numeri segnati di una riga devono essere un sottoinsieme dei numeri della riga

        self.cartella_default.reset_cartella()

        if len(numeri_per_riga[0]) >= 2:

            self.cartella_default.segna_numero(numeri_per_riga[0][0])

            self.cartella_default.segna_numero(numeri_per_riga[0][1])

        numeri_totali_riga_0 = self.cartella_default.get_numeri_riga(0)

        numeri_segnati_riga_0 = self.cartella_default.get_numeri_segnati_riga(0)

        # Tutti i numeri segnati devono essere nei numeri totali della riga

        for numero in numeri_segnati_riga_0:

            self.assertIn(numero, numeri_totali_riga_0, f"Il numero segnato {numero} deve essere nei numeri totali della riga 0")


    #metodo per testare il metodo get_numeri_segnati_colonna
    def test_get_numeri_segnati_colonna(self):

        # TEST 1: Verifica che inizialmente nessuna colonna ha numeri segnati

        for colonna in range(9):

            numeri_segnati = self.cartella_default.get_numeri_segnati_colonna(colonna)

            self.assertEqual(len(numeri_segnati), 0, f"Inizialmente la colonna {colonna} non dovrebbe avere numeri segnati")

            self.assertEqual(numeri_segnati, [], "Dovrebbe ritornare una lista vuota")

        # Raccolgo numeri per colonna dalla matrice

        numeri_per_colonna = [[] for _ in range(9)]

        for colonna in range(9):

            for riga in range(3):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_per_colonna[colonna].append(elemento)

        # TEST 2: Segna 1 numero di una colonna e verifica che compare nella lista

        # Trova una colonna con numeri

        colonna_test = None

        for col in range(9):

            if len(numeri_per_colonna[col]) >= 1:

                colonna_test = col

                break

        if colonna_test is not None:

            self.cartella_default.segna_numero(numeri_per_colonna[colonna_test][0])

            numeri_segnati = self.cartella_default.get_numeri_segnati_colonna(colonna_test)

            self.assertEqual(len(numeri_segnati), 1, "Dovrebbe avere 1 numero segnato")

            self.assertIn(numeri_per_colonna[colonna_test][0], numeri_segnati, "Il numero segnato dovrebbe essere nella lista")

        # TEST 3: Segna piÃ¹ numeri della stessa colonna

        if colonna_test is not None and len(numeri_per_colonna[colonna_test]) >= 2:

            self.cartella_default.segna_numero(numeri_per_colonna[colonna_test][1])

            numeri_segnati = self.cartella_default.get_numeri_segnati_colonna(colonna_test)

            self.assertEqual(len(numeri_segnati), 2, "Dovrebbe avere 2 numeri segnati")

            # Verifica che sono ordinati

            self.assertEqual(numeri_segnati, sorted(numeri_segnati), "I numeri segnati devono essere ordinati")

        # TEST 4: Verifica che altre colonne non hanno numeri segnati

        for col in range(9):

            if col != colonna_test:

                numeri_segnati = self.cartella_default.get_numeri_segnati_colonna(col)

                self.assertEqual(len(numeri_segnati), 0, f"La colonna {col} non dovrebbe avere numeri segnati")

        # TEST 5: Reset e verifica che tutti i numeri segnati scompaiono

        self.cartella_default.reset_cartella()

        for colonna in range(9):

            numeri_segnati = self.cartella_default.get_numeri_segnati_colonna(colonna)

            self.assertEqual(len(numeri_segnati), 0, f"Dopo reset, la colonna {colonna} non dovrebbe avere numeri segnati")

        # TEST 6: Verifica che solleva eccezione con numero di colonna non valido

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_colonna(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_colonna(9)

        with self.assertRaises(ValueError):

            self.cartella_default.get_numeri_segnati_colonna(20)

        # TEST 7: Verifica coerenza con get_numeri_colonna()

        # I numeri segnati di una colonna devono essere un sottoinsieme dei numeri della colonna

        self.cartella_default.reset_cartella()

        colonna_test2 = None

        for col in range(9):

            if len(numeri_per_colonna[col]) >= 1:

                colonna_test2 = col

                self.cartella_default.segna_numero(numeri_per_colonna[col][0])

                break

        if colonna_test2 is not None:

            numeri_totali_col = self.cartella_default.get_numeri_colonna(colonna_test2)

            numeri_segnati_col = self.cartella_default.get_numeri_segnati_colonna(colonna_test2)

            # Tutti i numeri segnati devono essere nei numeri totali della colonna

            for numero in numeri_segnati_col:

                self.assertIn(numero, numeri_totali_col, f"Il numero segnato {numero} deve essere nei numeri totali della colonna {colonna_test2}")


    #metodo per testare il metodo get_stato_riga
    def test_get_stato_riga(self):

        # TEST 1: Verifica che il metodo ritorna un dizionario con tutte le chiavi necessarie

        stato = self.cartella_default.get_stato_riga(0)

        self.assertIsInstance(stato, dict, "Il metodo deve ritornare un dizionario")

        # Verifica che il dizionario contiene tutte le chiavi necessarie

        chiavi_attese = ['numero_riga', 'numeri_totali', 'numeri_riga', 'numeri_segnati', 'numeri_segnati_riga', 'percentuale_completamento']

        for chiave in chiavi_attese:

            self.assertIn(chiave, stato, f"Il dizionario deve contenere la chiave '{chiave}'")

        # TEST 2: Verifica i valori iniziali (nessun numero segnato)

        for riga in range(3):

            stato = self.cartella_default.get_stato_riga(riga)

            self.assertEqual(stato['numero_riga'], riga, f"Il numero di riga deve essere {riga}")

            self.assertEqual(stato['numeri_totali'], 5, f"Ogni riga deve contenere 5 numeri")

            self.assertEqual(len(stato['numeri_riga']), 5, "numeri_riga deve contenere 5 numeri")

            self.assertEqual(stato['numeri_segnati'], 0, "Inizialmente nessun numero deve essere segnato")

            self.assertEqual(len(stato['numeri_segnati_riga']), 0, "numeri_segnati_riga deve essere vuoto")

            self.assertEqual(stato['percentuale_completamento'], 0.0, "La percentuale deve essere 0.0")

        # TEST 3: Segna alcuni numeri e verifica che lo stato cambia correttamente

        numeri_per_riga = [[] for _ in range(3)]

        for riga in range(3):

            for colonna in range(9):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_per_riga[riga].append(elemento)

        # Segna 2 numeri della riga 0

        if len(numeri_per_riga[0]) >= 2:

            self.cartella_default.segna_numero(numeri_per_riga[0][0])

            self.cartella_default.segna_numero(numeri_per_riga[0][1])

        stato = self.cartella_default.get_stato_riga(0)

        self.assertEqual(stato['numeri_segnati'], 2, "Dovrebbero esserci 2 numeri segnati")

        self.assertEqual(len(stato['numeri_segnati_riga']), 2, "numeri_segnati_riga deve contenere 2 numeri")

        self.assertAlmostEqual(stato['percentuale_completamento'], 40.0, places=1, msg="La percentuale dovrebbe essere 40.0% (2/5)")

        # TEST 4: Verifica che le altre righe non hanno cambiamenti

        stato_1 = self.cartella_default.get_stato_riga(1)

        stato_2 = self.cartella_default.get_stato_riga(2)

        self.assertEqual(stato_1['numeri_segnati'], 0, "La riga 1 non dovrebbe avere numeri segnati")

        self.assertEqual(stato_2['numeri_segnati'], 0, "La riga 2 non dovrebbe avere numeri segnati")

        # TEST 5: Segna tutti i numeri di una riga

        self.cartella_default.reset_cartella()

        if len(numeri_per_riga[1]) == 5:

            for numero in numeri_per_riga[1]:

                self.cartella_default.segna_numero(numero)

        stato = self.cartella_default.get_stato_riga(1)

        self.assertEqual(stato['numeri_segnati'], 5, "Dovrebbero esserci 5 numeri segnati")

        self.assertEqual(stato['percentuale_completamento'], 100.0, "La percentuale dovrebbe essere 100.0%")

        # TEST 6: Verifica che solleva eccezione con numero di riga non valido

        with self.assertRaises(ValueError):

            self.cartella_default.get_stato_riga(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.get_stato_riga(3)

        with self.assertRaises(ValueError):

            self.cartella_default.get_stato_riga(10)

        # TEST 7: Verifica coerenza dei dati nel dizionario

        self.cartella_default.reset_cartella()

        if len(numeri_per_riga[2]) >= 3:

            for i in range(3):

                self.cartella_default.segna_numero(numeri_per_riga[2][i])

        stato = self.cartella_default.get_stato_riga(2)

        # numeri_segnati deve corrispondere a len(numeri_segnati_riga)

        self.assertEqual(stato['numeri_segnati'], len(stato['numeri_segnati_riga']), "numeri_segnati deve corrispondere alla lunghezza di numeri_segnati_riga")

        # Tutti i numeri segnati devono essere nei numeri totali

        for numero in stato['numeri_segnati_riga']:

            self.assertIn(numero, stato['numeri_riga'], f"Il numero segnato {numero} deve essere nei numeri totali della riga")

        # Verifica la percentuale

        percentuale_attesa = (stato['numeri_segnati'] / stato['numeri_totali']) * 100

        percentuale_attesa = round(percentuale_attesa, 1)

        self.assertEqual(stato['percentuale_completamento'], percentuale_attesa, "La percentuale non Ã¨ corretta")


    #metodo per testare il metodo get_stato_cartella
    def test_get_stato_cartella(self):

        # TEST 1: Verifica che il metodo ritorna un dizionario con tutte le chiavi necessarie

        stato = self.cartella_default.get_stato_cartella()

        self.assertIsInstance(stato, dict, "Il metodo deve ritornare un dizionario")

        # Verifica che il dizionario contiene tutte le chiavi necessarie

        chiavi_attese = ['numeri_totali', 'numeri_segnati', 'numeri_non_segnati', 'lista_numeri_cartella', 'lista_numeri_non_segnati', 'percentuale_completamento']

        for chiave in chiavi_attese:

            self.assertIn(chiave, stato, f"Il dizionario deve contenere la chiave '{chiave}'")

        # TEST 2: Verifica i valori iniziali (nessun numero segnato)

        stato = self.cartella_default.get_stato_cartella()

        self.assertEqual(stato['numeri_totali'], 15, "Devono esserci 15 numeri totali")

        self.assertEqual(stato['numeri_segnati'], 0, "Inizialmente nessun numero deve essere segnato")

        self.assertEqual(stato['numeri_non_segnati'], 15, "Inizialmente tutti i 15 numeri devono essere non segnati")

        self.assertEqual(len(stato['lista_numeri_cartella']), 15, "lista_numeri_cartella deve contenere 15 numeri")

        self.assertEqual(len(stato['lista_numeri_non_segnati']), 15, "lista_numeri_non_segnati deve contenere 15 numeri")

        self.assertEqual(stato['percentuale_completamento'], 0.0, "La percentuale deve essere 0.0")

        # TEST 3: Verifica che lista_numeri_cartella e lista_numeri_non_segnati sono uguali all'inizio

        stato = self.cartella_default.get_stato_cartella()

        self.assertEqual(stato['lista_numeri_cartella'], stato['lista_numeri_non_segnati'], "All'inizio, tutti i numeri non sono segnati")

        # TEST 4: Segna alcuni numeri e verifica che lo stato cambia

        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        for i in range(5):

            self.cartella_default.segna_numero(numeri_disponibili[i])

        stato = self.cartella_default.get_stato_cartella()

        self.assertEqual(stato['numeri_segnati'], 5, "Dovrebbero esserci 5 numeri segnati")

        self.assertEqual(stato['numeri_non_segnati'], 10, "Dovrebbero rimanere 10 numeri non segnati")

        self.assertEqual(len(stato['lista_numeri_non_segnati']), 10, "lista_numeri_non_segnati deve contenere 10 numeri")

        self.assertAlmostEqual(stato['percentuale_completamento'], 33.3, places=1, msg="La percentuale dovrebbe essere ~33.3%")

        # TEST 5: Segna tutti i numeri (TOMBOLA!)

        for i in range(5, 15):

            self.cartella_default.segna_numero(numeri_disponibili[i])

        stato = self.cartella_default.get_stato_cartella()

        self.assertEqual(stato['numeri_segnati'], 15, "Dovrebbero esserci 15 numeri segnati (TOMBOLA!)")

        self.assertEqual(stato['numeri_non_segnati'], 0, "Non dovrebbero rimanere numeri non segnati")

        self.assertEqual(len(stato['lista_numeri_non_segnati']), 0, "lista_numeri_non_segnati deve essere vuota")

        self.assertEqual(stato['percentuale_completamento'], 100.0, "La percentuale deve essere 100.0% (TOMBOLA!)")

        # TEST 6: Reset e verifica che lo stato torna al principio

        self.cartella_default.reset_cartella()

        stato = self.cartella_default.get_stato_cartella()

        self.assertEqual(stato['numeri_segnati'], 0, "Dopo reset, nessun numero deve essere segnato")

        self.assertEqual(stato['numeri_non_segnati'], 15, "Dopo reset, tutti i 15 numeri devono essere non segnati")

        self.assertEqual(stato['percentuale_completamento'], 0.0, "Dopo reset, la percentuale deve essere 0.0")

        # TEST 7: Verifica coerenza dei dati

        self.cartella_default.segna_numero(numeri_disponibili[0])

        self.cartella_default.segna_numero(numeri_disponibili[1])

        self.cartella_default.segna_numero(numeri_disponibili[2])

        stato = self.cartella_default.get_stato_cartella()

        # numeri_segnati + numeri_non_segnati deve essere 15

        self.assertEqual(stato['numeri_segnati'] + stato['numeri_non_segnati'], 15, "La somma di segnati e non segnati deve essere 15")

        # La lista_numeri_cartella e l'unione di lista_numeri_segnati devono essere coerenti

        numeri_segnati_da_lista = stato['lista_numeri_cartella'].copy()

        for numero in stato['lista_numeri_non_segnati']:

            numeri_segnati_da_lista.remove(numero)

        # Verifica la coerenza della percentuale

        percentuale_attesa = (stato['numeri_segnati'] / stato['numeri_totali']) * 100

        percentuale_attesa = round(percentuale_attesa, 1)

        self.assertEqual(stato['percentuale_completamento'], percentuale_attesa, "La percentuale non Ã¨ corretta")



    #metodo per testare il metodo stampa_riga
    def test_stampa_riga(self):

        # Raccolgo numeri per riga dalla matrice

        numeri_per_riga = [[] for _ in range(3)]

        for riga in range(3):

            for colonna in range(9):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_per_riga[riga].append(elemento)

        # TEST 1: Verifica che il metodo ritorna una stringa

        for riga in range(3):

            stampa = self.cartella_default.stampa_riga(riga)

            self.assertIsInstance(stampa, str, f"Il metodo deve ritornare una stringa per la riga {riga}")

            self.assertTrue(len(stampa) > 0, f"La stringa stampata della riga {riga} non dovrebbe essere vuota")

        # TEST 2: Verifica che la stringa contiene il numero della riga

        for riga in range(3):

            stampa = self.cartella_default.stampa_riga(riga)

            self.assertIn(f"Riga {riga}:", stampa, f"La stringa deve contenere 'Riga {riga}:'")

        # TEST 3: Verifica che la stringa contiene i numeri della riga

        for riga in range(3):

            stampa = self.cartella_default.stampa_riga(riga)

            for numero in numeri_per_riga[riga]:

                self.assertIn(str(numero), stampa, f"Il numero {numero} della riga {riga} deve essere nella stringa stampata")

        # TEST 4: Verifica che la stringa contiene informazioni riepilogative

        for riga in range(3):

            stampa = self.cartella_default.stampa_riga(riga)

            self.assertIn("Segnati:", stampa, f"La stringa deve contenere 'Segnati:' per la riga {riga}")

            self.assertIn("su", stampa, f"La stringa deve contenere 'su' per la riga {riga}")

            self.assertIn("%", stampa, f"La stringa deve contenere '%' per la riga {riga}")

        # TEST 5: Segna alcuni numeri e verifica che vengono marcati con asterischi

        if len(numeri_per_riga[0]) >= 2:

            self.cartella_default.segna_numero(numeri_per_riga[0][0])

            self.cartella_default.segna_numero(numeri_per_riga[0][1])

        stampa = self.cartella_default.stampa_riga(0)

        # Il numero segnato deve essere preceduto da asterisco

        if len(numeri_per_riga[0]) >= 2:

            self.assertIn(f"*{numeri_per_riga[0][0]}", stampa, f"Il numero segnato {numeri_per_riga[0][0]} deve avere asterischo al inizio")

            self.assertIn(f"*{numeri_per_riga[0][1]}", stampa, f"Il numero segnato {numeri_per_riga[0][1]} deve avere asterisco al inizio")

        # TEST 6: Verifica che i numeri non segnati non hanno asterischi

        if len(numeri_per_riga[0]) >= 3:

            numero_non_segnato = numeri_per_riga[0][2]

            # La stringa deve contenere il numero ma NON circondato da asterischi

            self.assertIn(str(numero_non_segnato), stampa, f"Il numero non segnato {numero_non_segnato} deve essere nella stringa")

            # Verifica che non c'Ã¨ *numero* per il numero non segnato

            self.assertNotIn(f"*{numero_non_segnato}*", stampa, f"Il numero non segnato {numero_non_segnato} non deve avere asterischi")

        # TEST 7: Verifica che solleva eccezione con numero di riga non valido

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_riga(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_riga(3)

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_riga(10)

        # TEST 8: Verifica che il conteggio dei segnati Ã¨ corretto

        self.cartella_default.reset_cartella()

        if len(numeri_per_riga[1]) >= 3:

            self.cartella_default.segna_numero(numeri_per_riga[1][0])

            self.cartella_default.segna_numero(numeri_per_riga[1][1])

            self.cartella_default.segna_numero(numeri_per_riga[1][2])

        stampa = self.cartella_default.stampa_riga(1)

        # Verifica che il conteggio sia corretto

        self.assertIn("Segnati: 3 su 5", stampa, "Il conteggio deve essere '3 su 5'")

        self.assertIn("60.0%", stampa, "La percentuale deve essere '60.0%'")



    #metodo per testare il metodo stampa_colonna
    def test_stampa_colonna(self):

        # Raccolgo numeri per colonna dalla matrice

        numeri_per_colonna = [[] for _ in range(9)]

        for colonna in range(9):

            for riga in range(3):

                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:

                    numeri_per_colonna[colonna].append(elemento)

        # TEST 1: Verifica che il metodo ritorna una stringa

        for colonna in range(9):

            stampa = self.cartella_default.stampa_colonna(colonna)

            self.assertIsInstance(stampa, str, f"Il metodo deve ritornare una stringa per la colonna {colonna}")

            self.assertTrue(len(stampa) > 0, f"La stringa stampata della colonna {colonna} non dovrebbe essere vuota")

        # TEST 2: Verifica che la stringa contiene il numero della colonna

        for colonna in range(9):

            stampa = self.cartella_default.stampa_colonna(colonna)

            self.assertIn(f"Colonna {colonna}:", stampa, f"La stringa deve contenere 'Colonna {colonna}:'")

        # TEST 3: Verifica che la stringa contiene i numeri della colonna

        for colonna in range(9):

            stampa = self.cartella_default.stampa_colonna(colonna)

            for numero in numeri_per_colonna[colonna]:

                self.assertIn(str(numero), stampa, f"Il numero {numero} della colonna {colonna} deve essere nella stringa stampata")

        # TEST 4: Verifica che la stringa contiene informazioni riepilogative

        for colonna in range(9):

            stampa = self.cartella_default.stampa_colonna(colonna)

            self.assertIn("Segnati:", stampa, f"La stringa deve contenere 'Segnati:' per la colonna {colonna}")

            self.assertIn("su", stampa, f"La stringa deve contenere 'su' per la colonna {colonna}")

            self.assertIn("%", stampa, f"La stringa deve contenere '%' per la colonna {colonna}")

        # TEST 5: Segna alcuni numeri di una colonna e verifica che vengono marcati

        colonna_test = None

        for col in range(9):

            if len(numeri_per_colonna[col]) >= 2:

                colonna_test = col

                break

        if colonna_test is not None:

            self.cartella_default.segna_numero(numeri_per_colonna[colonna_test][0])

            self.cartella_default.segna_numero(numeri_per_colonna[colonna_test][1])

            stampa = self.cartella_default.stampa_colonna(colonna_test)

            # I numeri segnati devono avere asterischi

            self.assertIn(f"*{numeri_per_colonna[colonna_test][0]}", stampa, f"Il numero segnato deve avere asterisco all'inizio")

            self.assertIn(f"*{numeri_per_colonna[colonna_test][1]}", stampa, f"Il numero segnato deve avere asterisco all'inizio")

        # TEST 6: Verifica che solleva eccezione con numero di colonna non valido

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_colonna(-1)

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_colonna(9)

        with self.assertRaises(ValueError):

            self.cartella_default.stampa_colonna(20)

        # TEST 7: Verifica il conteggio per una colonna specifica

        self.cartella_default.reset_cartella()

        colonna_test2 = None

        for col in range(9):

            if len(numeri_per_colonna[col]) >= 2:

                colonna_test2 = col

                self.cartella_default.segna_numero(numeri_per_colonna[col][0])

                if len(numeri_per_colonna[col]) >= 2:

                    self.cartella_default.segna_numero(numeri_per_colonna[col][1])

                break

        if colonna_test2 is not None:

            stampa = self.cartella_default.stampa_colonna(colonna_test2)

            num_segnati = len([n for n in numeri_per_colonna[colonna_test2] if self.cartella_default.is_numero_segnato(n)])

            num_totali = len(numeri_per_colonna[colonna_test2])

            self.assertIn(f"Segnati: {num_segnati} su {num_totali}", stampa, "Il conteggio deve essere corretto")



    #metodo per testare il metodo stampa_cartella_con_stato
    def test_stampa_cartella_con_stato(self):

        # TEST 1: Verifica che il metodo ritorna una stringa

        stampa = self.cartella_default.stampa_cartella_con_stato()

        self.assertIsInstance(stampa, str, "Il metodo deve ritornare una stringa")

        self.assertTrue(len(stampa) > 0, "La stringa stampata non dovrebbe essere vuota")

        # TEST 2: Verifica che la stringa contiene informazioni sulla cartella

        self.assertIn("Totale segnati:", stampa, "La stringa deve contenere 'Totale segnati:'")

        # TEST 3: Verifica che contiene informazioni sulla percentuale

        self.assertIn("%", stampa, "La stringa deve contenere il simbolo '%'")

        # TEST 4: Verifica che contiene i numeri della cartella

        numeri_cartella = self.cartella_default.get_numeri_cartella()

        for numero in numeri_cartella:

            self.assertIn(str(numero), stampa, f"Il numero {numero} deve essere nella stringa")

        # TEST 5: Inizialmente nessun numero Ã¨ segnato, quindi nessun asterisco

        stampa = self.cartella_default.stampa_cartella_con_stato()

        self.assertNotIn("*", stampa, "Inizialmente non dovrebbero esserci asterischi")

        # TEST 6: Segna alcuni numeri e verifica che vengono marcati con asterischi

        self.cartella_default.segna_numero(numeri_cartella[0])

        self.cartella_default.segna_numero(numeri_cartella[1])

        stampa = self.cartella_default.stampa_cartella_con_stato()

        # Deve contenere gli asterischi

        self.assertIn("*", stampa, "Dopo aver segnato numeri, dovrebbero esserci asterischi")

        # I numeri segnati devono avere asterischi

        self.assertIn(f"*{numeri_cartella[0]}", stampa, f"Il numero segnato {numeri_cartella[0]} deve avere asterisco all'inizio")

        self.assertIn(f"*{numeri_cartella[1]}", stampa, f"Il numero segnato {numeri_cartella[1]} deve avere asterisco all'inizio.")

        # TEST 7: Verifica il conteggio corretto dei segnati

        stampa = self.cartella_default.stampa_cartella_con_stato()

        self.assertIn("Totale segnati: 2 su 15", stampa, "Il conteggio deve essere '2 su 15'")

        # TEST 8: Segna tutti i numeri (TOMBOLA!) e verifica

        self.cartella_default.reset_cartella()

        for numero in numeri_cartella:

            self.cartella_default.segna_numero(numero)

        stampa = self.cartella_default.stampa_cartella_con_stato()

        self.assertIn("Totale segnati: 15 su 15", stampa, "Dovrebbe essere '15 su 15' (TOMBOLA!)")

        self.assertIn("100.0%", stampa, "La percentuale dovrebbe essere '100.0%'")

        # TEST 9: Verifica che la struttura Ã¨ simile a stampa_cartella

        # Deve avere 3 righe di numeri + 1 riga di riepilogo = 4 righe totali

        righe = stampa.split("\n")

        # Dovrebbe avere almeno 4 righe (3 di matrice + 1 di riepilogo)

        self.assertGreaterEqual(len(righe), 4, "La stringa deve contenere almeno 4 righe")

        # TEST 10: Verifica il conteggio dei trattini (spazi vuoti non segnati)

        self.cartella_default.reset_cartella()

        stampa = self.cartella_default.stampa_cartella_con_stato()

        # Dovrebbe avere 12 trattini (per gli spazi vuoti)

        num_trattini = stampa.count("-")

        self.assertEqual(num_trattini, 12, f"Dovrebbe avere 12 trattini per i 12 spazi vuoti")

        # TEST 11: Verifica di confronto con stampa_cartella()

        self.cartella_default.reset_cartella()

        stampa_base = self.cartella_default.stampa_cartella()

        stampa_con_stato = self.cartella_default.stampa_cartella_con_stato()

        # stampa_con_stato deve contenere le stesse coordinate ma con le informazioni aggiunte

        # e non dovrebbe avere asterischi (perchÃ© nessun numero Ã¨ segnato)

        self.assertNotIn("*", stampa_con_stato, "Inizialmente non dovrebbero esserci asterischi")

        # Devono contenere gli stessi numeri

        for numero in numeri_cartella:

            self.assertIn(str(numero), stampa_con_stato, f"Il numero {numero} deve essere presente")

        # TEST 12: Verifica che i numeri segnati hanno il formato corretto

        self.cartella_default.reset_cartella()

        # Segna il primo numero

        self.cartella_default.segna_numero(numeri_cartella[0])

        stampa = self.cartella_default.stampa_cartella_con_stato()

        # Il numero segnato deve avere asterischi su entrambi i lati

        self.assertIn(f"*{numeri_cartella[0]}", stampa, f"Il numero segnato deve essere nel formato *numero")





    #metodo per testare il metodo stampa_cartella
    def test_stampa_cartella(self):
        # Chiama il metodo per ottenere la rappresentazione testuale della cartella
        cartella_stampata = self.cartella_default.stampa_cartella()
        # Verifica che il risultato sia una stringa
        self.assertIsInstance(cartella_stampata, str, "Il metodo stampa_cartella() dovrebbe ritornare una stringa")
        # Verifica che la stringa non sia vuota
        self.assertTrue(len(cartella_stampata) > 0, "La stringa stampata della cartella non dovrebbe essere vuota")
        # Divide la stringa in righe usando il newline come separatore
        righe = cartella_stampata.split("\n")
        # Verifica che ci siano esattamente 3 righe
        self.assertEqual(len(righe), 3, f"La cartella dovrebbe avere 3 righe, ma ne ha {len(righe)}")

        # Verifica che ogni riga contenga il numero corretto di elementi (9 colonne)
        for indice_riga, riga in enumerate(righe):
            # Divide ogni riga per i doppi spazi che separano le colonne
            colonne = riga.split("  ")
            # Verifica che ogni riga abbia esattamente 9 colonne
            self.assertEqual(len(colonne), 9, f"La riga {indice_riga} dovrebbe avere 9 colonne, ma ne ha {len(colonne)}")

            # Verifica che ogni colonna sia un numero formattato (2 caratteri) o un trattino
            for indice_colonna, colonna in enumerate(colonne):
                # La colonna dovrebbe essere "-" o un numero di 2 caratteri
                self.assertTrue(
                    colonna == "-" or colonna.isdigit() or (colonna.startswith(" ") and colonna[1:].isdigit()),
                    f"La colonna {indice_colonna} della riga {indice_riga} ha valore '{colonna}', che non Ã¨ valido"
                )

        # Verifica che la cartella stampata contenga i numeri della cartella
        cartella_testo = cartella_stampata.replace("\n", " ").replace("  ", " ")
        numeri_cartella = self.cartella_default.get_numeri_cartella()

        for numero in numeri_cartella:
            # Converte il numero in stringa e verifica che sia presente nella cartella stampata
            numero_str = str(numero)
            self.assertIn(numero_str, cartella_testo, f"Il numero {numero} non Ã¨ presente nella cartella stampata")

        # Verifica che la cartella stampata contenga esattamente 15 numeri (contando gli spazi dei trattini). Conta il numero di trattini "-" che rappresentano gli spazi vuoti
        numero_trattini = cartella_stampata.count("-")
        # La cartella ha 27 celle totali (3x9), quindi dovrebbe avere 27-15=12 trattini
        self.assertEqual(numero_trattini, 12, f"La cartella dovrebbe avere 12 trattini (spazi vuoti), ma ne ha {numero_trattini}")

        # Verifica che ogni numero sia nella posizione corretta della matrice
        righe_split = cartella_stampata.split("\n")

        for indice_riga in range(self.cartella_default.righe):
            colonne_split = righe_split[indice_riga].split("  ")

            for indice_colonna in range(self.cartella_default.colonne):
                elemento_matrice = self.cartella_default.cartella[indice_riga][indice_colonna]
                elemento_stampato = colonne_split[indice_colonna].strip()

                if elemento_matrice is None:
                    # Se l'elemento Ã¨ None, il testo stampato dovrebbe essere "-"
                    self.assertEqual(elemento_stampato, "-", f"La posizione ({indice_riga}, {indice_colonna}) dovrebbe essere '-', ma Ã¨ '{elemento_stampato}'")
                else:
                    # Se l'elemento Ã¨ un numero, il testo stampato dovrebbe contenere quel numero
                    self.assertEqual(int(elemento_stampato), elemento_matrice, f"La posizione ({indice_riga}, {indice_colonna}) dovrebbe contenere {elemento_matrice}, ma contiene {elemento_stampato}")



    #metodo per testare il metodo reset_cartella
    def test_reset_cartella(self):

        # Salva una copia della matrice originale prima del test
        matrice_originale = [riga[:] for riga in self.cartella_default.cartella]
        # Salva una copia del set dei numeri cartella originali
        numeri_cartella_originali = set(self.cartella_default.numeri_cartella)

        # Verifica che inizialmente il set dei numeri segnati sia vuoto
        self.assertEqual(len(self.cartella_default.numeri_segnati), 0, "Inizialmente, il set dei numeri segnati dovrebbe essere vuoto")

        # Ottiene i numeri della cartella
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # Segna i primi 5 numeri della cartella
        numeri_da_segnare = numeri_disponibili[:5]
        for numero in numeri_da_segnare:
            risultato = self.cartella_default.segna_numero(numero)
            self.assertTrue(risultato, f"Il numero {numero} dovrebbe essere stato segnato correttamente")

        # Verifica che i 5 numeri siano effettivamente segnati
        self.assertEqual(len(self.cartella_default.numeri_segnati), 5, "Dopo aver segnato 5 numeri, il set dovrebbe contenere 5 elementi")

        # Verifica che i numeri segnati siano esattamente quelli che abbiamo segnato
        for numero in numeri_da_segnare:
            self.assertIn(numero, self.cartella_default.numeri_segnati, f"Il numero {numero} dovrebbe essere presente nel set dei numeri segnati")

        # Chiama il metodo reset_cartella
        self.cartella_default.reset_cartella()
        # Verifica che dopo il reset il set dei numeri segnati sia vuoto
        self.assertEqual(len(self.cartella_default.numeri_segnati), 0, "Dopo il reset, il set dei numeri segnati dovrebbe essere vuoto")
        # Verifica che il set dei numeri segnati sia un set (non None o altro tipo)
        self.assertIsInstance(self.cartella_default.numeri_segnati, set, "Dopo il reset, numeri_segnati dovrebbe ancora essere un set")

        # Verifica che la matrice della cartella sia rimasta identica
        for indice_riga in range(self.cartella_default.righe):
            for indice_colonna in range(self.cartella_default.colonne):
                self.assertEqual(
                    self.cartella_default.cartella[indice_riga][indice_colonna],
                    matrice_originale[indice_riga][indice_colonna],
                    f"La posizione ({indice_riga}, {indice_colonna}) della matrice dovrebbe essere rimasta invariata dopo il reset"
                )

        # Verifica che il set dei numeri della cartella sia rimasto identico
        self.assertEqual(self.cartella_default.numeri_cartella, numeri_cartella_originali, "Il set dei numeri della cartella dovrebbe essere rimasto invariato")
        # Verifica che i numeri disponibili siano rimasti gli stessi
        numeri_dopo_reset = self.cartella_default.get_numeri_cartella()
        self.assertEqual(numeri_disponibili, numeri_dopo_reset, "I numeri disponibili dovrebbero essere rimasti gli stessi")

        # Test di idempotenza: resetta di nuovo senza segnare ulteriori numeri
        self.cartella_default.reset_cartella()
        self.assertEqual(len(self.cartella_default.numeri_segnati), 0, "Dopo un doppio reset, il set dovrebbe ancora essere vuoto")

        # Segna di nuovo alcuni numeri per verificare che il reset funzioni anche in successive iterazioni
        for numero in numeri_da_segnare[:3]:
            self.cartella_default.segna_numero(numero)

        self.assertEqual(len(self.cartella_default.numeri_segnati), 3, "Dopo aver segnato 3 numeri, il set dovrebbe contenere 3 elementi")

        # Resetta di nuovo
        self.cartella_default.reset_cartella()
        self.assertEqual(len(self.cartella_default.numeri_segnati), 0, "Dopo il secondo reset, il set dovrebbe essere di nuovo vuoto")



    """metodi di test per l'interrogazione sullo stato della cartella"""


    #metodo per testare il metodo conta_numeri_segnati
    def test_conta_numeri_segnati(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # TEST 1: Verifica che inizialmente il conteggio sia 0
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 0, "Inizialmente il conteggio dei numeri segnati dovrebbe essere 0")

        # TEST 2: Segna 1 numero e verifica che il conteggio sia 1
        self.cartella_default.segna_numero(numeri_disponibili[0])
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 1, "Dopo aver segnato 1 numero, il conteggio dovrebbe essere 1")

        # TEST 3: Segna altri 4 numeri (totale 5) e verifica il conteggio
        for i in range(1, 5):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 5, "Dopo aver segnato 5 numeri, il conteggio dovrebbe essere 5")

        # TEST 4: Segna i rimanenti 10 numeri (totale 15) e verifica il conteggio massimo
        for i in range(5, 15):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 15, "Quando tutti i numeri sono segnati, il conteggio dovrebbe essere 15")

        # TEST 5: Verifica che il conteggio rimane 15 anche dopo aver provato a segnare un numero giÃ  segnato
        risultato = self.cartella_default.segna_numero(numeri_disponibili[0])
        conteggio = self.cartella_default.conta_numeri_segnati()
        # segna_numero() dovrebbe ritornare False per un numero giÃ  segnato
        self.assertFalse(risultato, "Non dovrebbe essere possibile segnare un numero giÃ  segnato")
        self.assertEqual(conteggio, 15, "Il conteggio dovrebbe rimanere 15 anche dopo aver tentato di segnare un numero giÃ  segnato")

        # TEST 6: Resetta la cartella e verifica che il conteggio torni a 0
        self.cartella_default.reset_cartella()
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 0, "Dopo un reset, il conteggio dovrebbe tornare a 0")

        # TEST 7: Segna esattamente 7 numeri e verifica il conteggio intermedio
        numeri_test = numeri_disponibili[:7]
        for numero in numeri_test:
            self.cartella_default.segna_numero(numero)
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 7, "Dopo aver segnato 7 numeri, il conteggio dovrebbe essere 7")

        # TEST 8: Segna un numero non presente nella cartella e verifica che il conteggio non cambi
        self.cartella_default.segna_numero(91)  # Numero fuori dalla cartella
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 7, "Segnare un numero non presente non dovrebbe modificare il conteggio")

        # TEST 9: Verifica che il conteggio Ã¨ sempre coerente con la lunghezza di numeri_segnati
        # Questo Ã¨ un test di coerenza interna
        conteggio_metodo = self.cartella_default.conta_numeri_segnati()
        conteggio_set = len(self.cartella_default.numeri_segnati)
        self.assertEqual(conteggio_metodo, conteggio_set, "Il conteggio del metodo deve corrispondere esattamente alla lunghezza del set numeri_segnati")

        # TEST 10: Verifica che ogni numero segnato nel conteggio Ã¨ effettivamente nella cartella
        # Estraiamo i numeri dal set e verifichiamo che siano tutti nella cartella
        self.cartella_default.reset_cartella()
        # Segna alcuni numeri specifici
        numeri_da_segnare = numeri_disponibili[:5]
        for numero in numeri_da_segnare:
            self.cartella_default.segna_numero(numero)
    # Verifica che tutti i numeri segnati sono nella lista dei numeri della cartella
        conteggio = self.cartella_default.conta_numeri_segnati()
        self.assertEqual(conteggio, 5, "Dovrebbero essere segnati esattamente 5 numeri")
    # Verifica che tutti i numeri segnati sono effettivamente nella cartella
        for numero in self.cartella_default.numeri_segnati:
            self.assertIn(numero, numeri_disponibili, f"Il numero {numero} Ã¨ marcato come segnato ma non Ã¨ nella cartella")


    #metodo per testare il metodo get_numeri_non_segnati
    def test_get_numeri_non_segnati(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # TEST 1: Verifica che inizialmente tutti i 15 numeri sono non segnati
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(len(numeri_non_segnati), 15, "Inizialmente tutti i 15 numeri dovrebbero essere non segnati")
        self.assertEqual(numeri_non_segnati, numeri_disponibili, "I numeri non segnati dovrebbero corrispondere ai numeri della cartella")

        # TEST 2: Segna 1 numero e verifica che rimangono 14 non segnati
        self.cartella_default.segna_numero(numeri_disponibili[0])
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(len(numeri_non_segnati), 14, "Dopo aver segnato 1 numero, dovrebbero rimanere 14 numeri non segnati")
        self.assertNotIn(numeri_disponibili[0], numeri_non_segnati, "Il numero segnato non dovrebbe essere nella lista dei non segnati")

        # TEST 3: Segna altri 4 numeri (totale 5) e verifica che rimangono 10 non segnati
        for i in range(1, 5):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(len(numeri_non_segnati), 10, "Dopo aver segnato 5 numeri, dovrebbero rimanere 10 numeri non segnati")
        # Verifica che i primi 5 numeri non sono piÃ¹ nella lista
        for i in range(5):
            self.assertNotIn(numeri_disponibili[i], numeri_non_segnati, f"Il numero {numeri_disponibili[i]} segnato non dovrebbe essere nella lista")

        # TEST 4: Segna i rimanenti 10 numeri (totale 15) e verifica che la lista Ã¨ vuota
        for i in range(5, 15):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(len(numeri_non_segnati), 0, "Quando tutti i 15 numeri sono segnati, la lista dovrebbe essere vuota")
        self.assertEqual(numeri_non_segnati, [], "La lista dovrebbe essere una lista vuota, non None")

        # TEST 5: Verifica che la lista dei non segnati Ã¨ sempre ordinata
        self.cartella_default.reset_cartella()
        # Segna alcuni numeri in ordine casuale (non sequenziale)
        numeri_da_segnare = [numeri_disponibili[5], numeri_disponibili[0], numeri_disponibili[10], numeri_disponibili[2]]
        for numero in numeri_da_segnare:
            self.cartella_default.segna_numero(numero)
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        # Verifica che la lista Ã¨ ordinata
        self.assertEqual(numeri_non_segnati, sorted(numeri_non_segnati), "La lista dei non segnati deve essere sempre ordinata crescente")

        # TEST 6: Reset e verifica che torna alla situazione iniziale
        self.cartella_default.reset_cartella()
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(len(numeri_non_segnati), 15, "Dopo un reset, tutti i 15 numeri dovrebbero essere nuovamente non segnati")
        self.assertEqual(numeri_non_segnati, numeri_disponibili, "Dopo reset, dovrebbe corrispondere ai numeri della cartella")
        # TEST 7: Verifica la relazione matematica con conta_numeri_segnati()
        # conta_numeri_segnati() + len(get_numeri_non_segnati()) deve sempre essere 15
        self.cartella_default.segna_numero(numeri_disponibili[0])
        self.cartella_default.segna_numero(numeri_disponibili[1])
        conteggio_segnati = self.cartella_default.conta_numeri_segnati()
        conteggio_non_segnati = len(self.cartella_default.get_numeri_non_segnati())
        self.assertEqual(conteggio_segnati + conteggio_non_segnati, 15, "La somma dei segnati e non segnati deve sempre essere 15")

        # TEST 8: Verifica che tutti i numeri nella lista sono effettivamente nella cartella
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        for numero in numeri_non_segnati:
            self.assertIn(numero, numeri_disponibili, f"Il numero {numero} nella lista dei non segnati dovrebbe essere nella cartella")

        # TEST 9: Verifica che nessun numero segnato compare nella lista
        self.cartella_default.reset_cartella()
        numeri_segnati_test = numeri_disponibili[:5]
        for numero in numeri_segnati_test:
            self.cartella_default.segna_numero(numero)
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        for numero_segnato in numeri_segnati_test:
            self.assertNotIn(numero_segnato, numeri_non_segnati, f"Il numero segnato {numero_segnato} non dovrebbe essere nella lista dei non segnati")

        # TEST 10: Verifica coerenza con l'operazione di set
        # I numeri non segnati devono corrispondere esattamente a cartella - segnati
        self.cartella_default.reset_cartella()
        numeri_segnati_test = numeri_disponibili[:7]
        for numero in numeri_segnati_test:
            self.cartella_default.segna_numero(numero)
        # Calcola manualmente la differenza
        differenza_set = set(numeri_disponibili) - set(numeri_segnati_test)
        differenza_lista = sorted(differenza_set)
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        self.assertEqual(numeri_non_segnati, differenza_lista, "Il metodo deve ritornare esattamente la differenza tra cartella e segnati")


    #metodo per testare il metodo get_percentuale_completamento
    def test_get_percentuale_completamento(self):
        
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()
        
        # TEST 1: Verifica che inizialmente la percentuale sia 0.0
        percentuale = self.cartella_default.get_percentuale_completamento()
        self.assertEqual(percentuale, 0.0, "Inizialmente la percentuale dovrebbe essere 0.0")
        
        # TEST 2: Segna 1 numero (6.67% arrotondato a 6.7) e verifica la percentuale
        self.cartella_default.segna_numero(numeri_disponibili[0])
        percentuale = self.cartella_default.get_percentuale_completamento()
        percentuale_attesa = round((100 / 15), 1)  # Arrotonda il valore atteso a 1 decimale
        self.assertEqual(percentuale, percentuale_attesa, 
            msg="Con 1 numero su 15, la percentuale dovrebbe essere 6.7%")
        
        # TEST 3: Segna altri 4 numeri (totale 5 = 33.33% arrotondato a 33.3%) e verifica
        for i in range(1, 5):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        
        percentuale = self.cartella_default.get_percentuale_completamento()
        percentuale_attesa = round((5 * 100 / 15), 1)
        self.assertEqual(percentuale, percentuale_attesa, 
            msg="Con 5 numeri su 15, la percentuale dovrebbe essere 33.3%")
        
        # TEST 4: Segna altri 5 numeri (totale 10 = 66.67% arrotondato a 66.7%) e verifica
        for i in range(5, 10):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        
        percentuale = self.cartella_default.get_percentuale_completamento()
        percentuale_attesa = round((10 * 100 / 15), 1)
        self.assertEqual(percentuale, percentuale_attesa, 
            msg="Con 10 numeri su 15, la percentuale dovrebbe essere 66.7%")
        
        # TEST 5: Segna i rimanenti 5 numeri (totale 15 = 100.0%) e verifica
        for i in range(10, 15):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        
        percentuale = self.cartella_default.get_percentuale_completamento()
        self.assertEqual(percentuale, 100.0, "Quando tutti i 15 numeri sono segnati, la percentuale dovrebbe essere 100.0")
        
        # TEST 6: Reset e verifica che torna a 0.0
        self.cartella_default.reset_cartella()
        percentuale = self.cartella_default.get_percentuale_completamento()
        self.assertEqual(percentuale, 0.0, "Dopo un reset, la percentuale dovrebbe tornare a 0.0")
        
        # TEST 7: Verifica la relazione lineare con conta_numeri_segnati()
        # percentuale = round((conta_numeri_segnati() / 15) * 100, 1)
        for i in range(7):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        
        conteggio = self.cartella_default.conta_numeri_segnati()
        percentuale = self.cartella_default.get_percentuale_completamento()
        percentuale_attesa = round((conteggio / 15) * 100, 1)
        
        self.assertEqual(percentuale, percentuale_attesa, 
            msg="La percentuale deve corrispondere a round((conteggio / 15) * 100, 1)")
        
        # TEST 8: Verifica che la percentuale Ã¨ sempre tra 0 e 100
        self.cartella_default.reset_cartella()
        
        for i in range(15):
            self.cartella_default.segna_numero(numeri_disponibili[i])
            percentuale = self.cartella_default.get_percentuale_completamento()
            self.assertGreaterEqual(percentuale, 0.0, "La percentuale non dovrebbe mai essere minore di 0.0")
            self.assertLessEqual(percentuale, 100.0, "La percentuale non dovrebbe mai essere maggiore di 100.0")
        
        # TEST 9: Verifica coerenza con get_numeri_non_segnati()
        self.cartella_default.reset_cartella()
        
        numeri_da_segnare = numeri_disponibili[:8]
        for numero in numeri_da_segnare:
            self.cartella_default.segna_numero(numero)
        
        percentuale = self.cartella_default.get_percentuale_completamento()
        numeri_non_segnati = self.cartella_default.get_numeri_non_segnati()
        
        # percentuale_non_segnati dovrebbe essere il complemento a 100 (con possibile differenza di arrotondamento)
        percentuale_non_segnati = (len(numeri_non_segnati) / 15) * 100
        percentuale_totale = percentuale + percentuale_non_segnati
        
        # Permettiamo una piccola tolleranza dovuta all'arrotondamento (max 0.2 punti percentuali)
        self.assertLess(abs(percentuale_totale - 100.0), 0.2, 
                    msg="Completamento + non segnati deve essere molto prossimo a 100.0 (tolleranza per arrotondamento)")
        
        # TEST 10: Verifica che il metodo ritorna un float
        self.cartella_default.reset_cartella()
        percentuale = self.cartella_default.get_percentuale_completamento()
        
        self.assertIsInstance(percentuale, float, "Il metodo deve ritornare un float, non un int")
        
        # TEST 11: Verifica i valori arrotondati per casi specifici
        self.cartella_default.reset_cartella()
        
        # 1 numero: 6.666... arrotondato a 6.7
        self.cartella_default.segna_numero(numeri_disponibili[0])
        self.assertEqual(self.cartella_default.get_percentuale_completamento(), 6.7)
        
        # Reset e 2 numeri: 13.333... arrotondato a 13.3
        self.cartella_default.reset_cartella()
        self.cartella_default.segna_numero(numeri_disponibili[0])
        self.cartella_default.segna_numero(numeri_disponibili[1])
        self.assertEqual(self.cartella_default.get_percentuale_completamento(), 13.3)
        
        # Reset e 3 numeri: 20.0
        self.cartella_default.reset_cartella()
        for i in range(3):
            self.cartella_default.segna_numero(numeri_disponibili[i])
        self.assertEqual(self.cartella_default.get_percentuale_completamento(), 20.0)



    #metodo per testare il metodo get_numeri_riga
    def test_get_numeri_riga(self):
        
        # TEST 1: Verifica che OGNI riga contiene ESATTAMENTE 5 numeri
        for riga in range(3):
            numeri = self.cartella_default.get_numeri_riga(riga)
            self.assertIsInstance(numeri, list, f"Il metodo deve ritornare una lista per la riga {riga}")
            self.assertEqual(len(numeri), 5, f"La riga {riga} deve contenere ESATTAMENTE 5 numeri, ma ne contiene {len(numeri)}")
        
        # TEST 2: Verifica che la lista Ã¨ ordinata
        for riga in range(3):
            numeri = self.cartella_default.get_numeri_riga(riga)
            self.assertEqual(numeri, sorted(numeri), f"I numeri della riga {riga} devono essere ordinati")
        
        # TEST 3: Verifica che tutti i numeri della riga sono nella cartella
        for riga in range(3):
            numeri = self.cartella_default.get_numeri_riga(riga)
            numeri_cartella = self.cartella_default.get_numeri_cartella()
            
            for numero in numeri:
                self.assertIn(numero, numeri_cartella, 
                    f"Il numero {numero} della riga {riga} deve essere nella cartella")
        
        # TEST 4: Verifica che non ci sono duplicati nella lista
        for riga in range(3):
            numeri = self.cartella_default.get_numeri_riga(riga)
            self.assertEqual(len(numeri), len(set(numeri)), 
                f"La riga {riga} non deve contenere duplicati")
        
        # TEST 5: Verifica che la somma di tutti i numeri delle 3 righe Ã¨ 15 (3 righe * 5 numeri/riga)
        numeri_riga_0 = self.cartella_default.get_numeri_riga(0)
        numeri_riga_1 = self.cartella_default.get_numeri_riga(1)
        numeri_riga_2 = self.cartella_default.get_numeri_riga(2)
        
        totale_numeri = len(numeri_riga_0) + len(numeri_riga_1) + len(numeri_riga_2)
        self.assertEqual(totale_numeri, 15, "Il totale deve essere 3 righe * 5 numeri = 15")
        
        # TEST 6: Verifica che i numeri delle 3 righe sono disgiunti (nessun overlap)
        numeri_set_0 = set(numeri_riga_0)
        numeri_set_1 = set(numeri_riga_1)
        numeri_set_2 = set(numeri_riga_2)
        
        self.assertEqual(len(numeri_set_0 & numeri_set_1), 0, "Righe 0 e 1 non devono condividere numeri")
        self.assertEqual(len(numeri_set_0 & numeri_set_2), 0, "Righe 0 e 2 non devono condividere numeri")
        self.assertEqual(len(numeri_set_1 & numeri_set_2), 0, "Righe 1 e 2 non devono condividere numeri")
        
        # TEST 7: Verifica che solleva eccezione con numero di riga non valido
        with self.assertRaises(ValueError):
            self.cartella_default.get_numeri_riga(-1)
        
        with self.assertRaises(ValueError):
            self.cartella_default.get_numeri_riga(3)
        
        with self.assertRaises(ValueError):
            self.cartella_default.get_numeri_riga(5)
        
        # TEST 8: Verifica che i numeri della riga sono estratti correttamente dalla matrice
        for riga in range(3):
            numeri_riga = self.cartella_default.get_numeri_riga(riga)
            
            # Estrae i numeri dalla matrice manualmente
            numeri_matrice = []
            for colonna in range(self.cartella_default.colonne):
                elemento = self.cartella_default.cartella[riga][colonna]
                if elemento is not None:
                    numeri_matrice.append(elemento)
            
            # Ordina i numeri estratti dalla matrice
            numeri_matrice_ordinati = sorted(numeri_matrice)
            
            # Devono corrispondere e contenere esattamente 5 numeri
            self.assertEqual(numeri_riga, numeri_matrice_ordinati, 
                f"I numeri della riga {riga} non corrispondono a quelli della matrice")
            self.assertEqual(len(numeri_matrice_ordinati), 5, 
                f"La matrice della riga {riga} deve contenere esattamente 5 numeri non-None")
        
        # TEST 9: Verifica che tutti i numeri delle righe unite corrispondono alla cartella completa
        numeri_riga_0 = self.cartella_default.get_numeri_riga(0)
        numeri_riga_1 = self.cartella_default.get_numeri_riga(1)
        numeri_riga_2 = self.cartella_default.get_numeri_riga(2)
        
        numeri_tutte_righe = sorted(numeri_riga_0 + numeri_riga_1 + numeri_riga_2)
        numeri_cartella = self.cartella_default.get_numeri_cartella()
        
        self.assertEqual(numeri_tutte_righe, numeri_cartella, 
            "L'unione dei numeri delle 3 righe deve corrispondere alla cartella completa")
        
        # TEST 10: Verifica che le righe sono indipendenti (ogni riga sempre 5 numeri)
        for riga in range(3):
            for test_ripetuto in range(3):  # Ripeti 3 volte per verificare coerenza
                numeri = self.cartella_default.get_numeri_riga(riga)
                self.assertEqual(len(numeri), 5, 
                    f"La riga {riga} deve avere sempre 5 numeri (test ripetuto {test_ripetuto + 1})")




    """metodi di test innerenti alle varie casistiche di vittoria della tombola italiana"""

    #metodo per testare il metodo verifica_ambo_riga
    def test_verifica_ambo_riga(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # Verifica che inizialmente nessuna riga ha l'ambo (nessun numero segnato)
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_ambo_riga(riga), f"Inizialmente la riga {riga} non dovrebbe avere l'ambo")

        # TEST 1: Segna esattamente 1 numero e verifica che nessuna riga ha l'ambo
        self.cartella_default.segna_numero(numeri_disponibili[0])
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_ambo_riga(riga), f"Con 1 numero segnato, nessuna riga dovrebbe avere l'ambo")

        """
        TEST 2: Segna almeno 2 numeri della stessa riga e verifica che quella riga ha l'ambo
        Per fare questo, devo trovare quali numeri appartengono a quale riga
        Prima raccolgo i numeri per riga dalla matrice
        """
        numeri_per_riga = [[] for _ in range(3)]
        for riga in range(3):
            for colonna in range(9):
                elemento = self.cartella_default.cartella[riga][colonna]
                if elemento is not None:
                    numeri_per_riga[riga].append(elemento)

        # Resetta la cartella per pulire i numeri segnati
        self.cartella_default.reset_cartella()
        # Verifica che dopo il reset nessuna riga ha l'ambo
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_ambo_riga(riga), f"Dopo il reset, la riga {riga} non dovrebbe avere l'ambo")

        # Segna i primi 2 numeri della riga 0
        if len(numeri_per_riga[0]) >= 2:
            self.cartella_default.segna_numero(numeri_per_riga[0][0])
            self.cartella_default.segna_numero(numeri_per_riga[0][1])
            # Verifica che la riga 0 ha l'ambo
            self.assertTrue(self.cartella_default.verifica_ambo_riga(0), "La riga 0 dovrebbe avere l'ambo con 2 numeri segnati")
            # Verifica che le altre righe non hanno l'ambo
            self.assertFalse(self.cartella_default.verifica_ambo_riga(1), "La riga 1 non dovrebbe avere l'ambo")
            self.assertFalse(self.cartella_default.verifica_ambo_riga(2), "La riga 2 non dovrebbe avere l'ambo")

        # TEST 3: Verifica che il metodo ritorna True anche con piÃ¹ di 2 numeri segnati
        self.cartella_default.reset_cartella()
        # Segna i primi 3 numeri della riga 1 (se disponibili)
        if len(numeri_per_riga[1]) >= 3:
            for i in range(3):
                self.cartella_default.segna_numero(numeri_per_riga[1][i])

            # Deve comunque ritornare True (ha almeno 2 numeri)
            self.assertTrue(self.cartella_default.verifica_ambo_riga(1), "La riga 1 dovrebbe avere l'ambo con 3 numeri segnati")

        # TEST 4: Verifica che solleva un'eccezione con numero di riga non valido
        with self.assertRaises(ValueError) as context:
            self.cartella_default.verifica_ambo_riga(5)
        self.assertIn("numero_riga deve essere tra", str(context.exception), "L'eccezione dovrebbe contenere il messaggio corretto")
        with self.assertRaises(ValueError):
            self.cartella_default.verifica_ambo_riga(-1)

        # TEST 5: Verifica il comportamento con numeri negativi
        with self.assertRaises(ValueError):
            self.cartella_default.verifica_ambo_riga(-2)

        # TEST 6: Verifica il caso limite dove la riga ha esattamente 2 numeri totali e entrambi sono segnati
        self.cartella_default.reset_cartella()
        # Trova una riga con esattamente 2 numeri
        for riga in range(3):
            if len(numeri_per_riga[riga]) == 2:
                # Segna entrambi i numeri
                self.cartella_default.segna_numero(numeri_per_riga[riga][0])
                self.cartella_default.segna_numero(numeri_per_riga[riga][1])
                # Deve ritornare True
                self.assertTrue(self.cartella_default.verifica_ambo_riga(riga), f"La riga {riga} dovrebbe avere l'ambo con tutti i 2 numeri segnati")
                break



    #metodo per testare il metodo verifica_terno_riga
    def test_verifica_terno_riga(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # Verifica che inizialmente nessuna riga ha il terno (nessun numero segnato)
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_terno_riga(riga), f"Inizialmente la riga {riga} non dovrebbe avere il terno")

        # TEST 1: Segna esattamente 1 numero e verifica che nessuna riga ha il terno
        self.cartella_default.segna_numero(numeri_disponibili[0])
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_terno_riga(riga), f"Con 1 numero segnato, nessuna riga dovrebbe avere il terno")

        # TEST 2: Segna esattamente 2 numeri della stessa riga â†’ NON deve avere terno
        # Prima raccolgo i numeri per riga dalla matrice
        numeri_per_riga = [[] for _ in range(3)]
        for riga in range(3):

            for colonna in range(9):
                elemento = self.cartella_default.cartella[riga][colonna]

                if elemento is not None:
                    numeri_per_riga[riga].append(elemento)

        # Resetta la cartella per pulire i numeri segnati
        self.cartella_default.reset_cartella()

        # Verifica che dopo il reset nessuna riga ha il terno
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_terno_riga(riga), f"Dopo il reset, la riga {riga} non dovrebbe avere il terno")

        # Segna esattamente 2 numeri della riga 0 â†’ NON deve essere terno
        if len(numeri_per_riga[0]) >= 2:
            self.cartella_default.segna_numero(numeri_per_riga[0][0])
            self.cartella_default.segna_numero(numeri_per_riga[0][1])

            # Verifica che la riga 0 NON ha il terno (solo 2 numeri)
            self.assertFalse(self.cartella_default.verifica_terno_riga(0), "La riga 0 NON dovrebbe avere il terno con solo 2 numeri segnati")

            # Verifica che le altre righe non hanno il terno
            self.assertFalse(self.cartella_default.verifica_terno_riga(1), "La riga 1 non dovrebbe avere il terno")
            self.assertFalse(self.cartella_default.verifica_terno_riga(2), "La riga 2 non dovrebbe avere il terno")

        # TEST 3: Verifica che il metodo ritorna True con esattamente 3 numeri segnati
        self.cartella_default.reset_cartella()

        # Segna esattamente 3 numeri della riga 1
        if len(numeri_per_riga[1]) >= 3:
            for i in range(3):
                self.cartella_default.segna_numero(numeri_per_riga[1][i])

            # Deve ritornare True (ha esattamente 3 numeri)
            self.assertTrue(self.cartella_default.verifica_terno_riga(1), "La riga 1 dovrebbe avere il terno con 3 numeri segnati")

        # TEST 4: Verifica che ritorna True anche con piÃ¹ di 3 numeri segnati
        self.cartella_default.reset_cartella()

        # Segna 4 numeri della riga 2 (se disponibili)
        if len(numeri_per_riga[2]) >= 4:
            for i in range(4):
                self.cartella_default.segna_numero(numeri_per_riga[2][i])

            # Deve comunque ritornare True (ha almeno 3 numeri)
            self.assertTrue(self.cartella_default.verifica_terno_riga(2), "La riga 2 dovrebbe avere il terno con 4 numeri segnati")

        # TEST 5: Verifica che solleva un'eccezione con numero di riga non valido
        with self.assertRaises(ValueError) as context:
            self.cartella_default.verifica_terno_riga(5)

        self.assertIn("numero_riga deve essere tra", str(context.exception), "L'eccezione dovrebbe contenere il messaggio corretto")

        with self.assertRaises(ValueError):
            self.cartella_default.verifica_terno_riga(-1)


    #metodo per testare il metodo verifica_quaterna_riga
    def test_verifica_quaterna_riga(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()

        # Verifica che inizialmente nessuna riga ha la quaterna
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_quaterna_riga(riga), f"Inizialmente la riga {riga} non dovrebbe avere la quaterna")

        # TEST 1: 1 numero â†’ False
        self.cartella_default.segna_numero(numeri_disponibili[0])
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_quaterna_riga(riga))
        # Raccolgo numeri per riga
        numeri_per_riga = [[] for _ in range(3)]
        for riga in range(3):
            for colonna in range(9):
                elemento = self.cartella_default.cartella[riga][colonna]
                if elemento is not None:
                    numeri_per_riga[riga].append(elemento)

        # TEST 2: 3 numeri â†’ False (non basta per quaterna)
        self.cartella_default.reset_cartella()
        if len(numeri_per_riga[0]) >= 3:
            for i in range(3):
                self.cartella_default.segna_numero(numeri_per_riga[0][i])
            self.assertFalse(self.cartella_default.verifica_quaterna_riga(0), "3 numeri NON bastano per quaterna")

        # TEST 3: 4 numeri â†’ True
        self.cartella_default.reset_cartella()
        if len(numeri_per_riga[1]) >= 4:
            for i in range(4):
                self.cartella_default.segna_numero(numeri_per_riga[1][i])
            self.assertTrue(self.cartella_default.verifica_quaterna_riga(1), "4 numeri = QUaterna!")

        # TEST 4: Eccezioni
        with self.assertRaises(ValueError):
            self.cartella_default.verifica_quaterna_riga(5)
        with self.assertRaises(ValueError):
            self.cartella_default.verifica_quaterna_riga(-1)


    #metodo per testare il metodo verifica_cinquina_riga
    def test_verifica_cinquina_riga(self):
        # Ottiene i numeri della cartella per i test
        numeri_disponibili = self.cartella_default.get_numeri_cartella()
        # Verifica che inizialmente nessuna riga ha la cinquina (nessun numero segnato)
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(riga), f"Inizialmente la riga {riga} non dovrebbe avere la cinquina")

        # TEST 1: Segna esattamente 1 numero e verifica che nessuna riga ha la cinquina
        self.cartella_default.segna_numero(numeri_disponibili[0])
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(riga), f"Con 1 numero segnato, nessuna riga dovrebbe avere la cinquina")
        # Prima raccolgo i numeri per riga dalla matrice
        numeri_per_riga = [[] for _ in range(3)]
        for riga in range(3):
            for colonna in range(9):
                elemento = self.cartella_default.cartella[riga][colonna]
                if elemento is not None:
                    numeri_per_riga[riga].append(elemento)
        # Resetta la cartella per pulire i numeri segnati
        self.cartella_default.reset_cartella()
        # Verifica che dopo il reset nessuna riga ha la cinquina
        for riga in range(3):
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(riga), f"Dopo il reset, la riga {riga} non dovrebbe avere la cinquina")

        # TEST 2: Segna esattamente 4 numeri della stessa riga â†’ NON deve avere cinquina
        if len(numeri_per_riga[0]) >= 4:
            self.cartella_default.segna_numero(numeri_per_riga[0][0])
            self.cartella_default.segna_numero(numeri_per_riga[0][1])
            self.cartella_default.segna_numero(numeri_per_riga[0][2])
            self.cartella_default.segna_numero(numeri_per_riga[0][3])
            # Verifica che la riga 0 NON ha la cinquina (solo 4 numeri)
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(0), "La riga 0 NON dovrebbe avere la cinquina con solo 4 numeri segnati")
            # Verifica che le altre righe non hanno la cinquina
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(1), "La riga 1 non dovrebbe avere la cinquina")
            self.assertFalse(self.cartella_default.verifica_cinquina_riga(2), "La riga 2 non dovrebbe avere la cinquina")

        # TEST 3: Verifica che il metodo ritorna True con esattamente 5 numeri segnati
        self.cartella_default.reset_cartella()
        # Cerca una riga con almeno 5 numeri e segna i primi 5
        for riga_test in range(3):
            if len(numeri_per_riga[riga_test]) >= 5:
                for i in range(5):
                    self.cartella_default.segna_numero(numeri_per_riga[riga_test][i])
                
                # Deve ritornare True (ha esattamente 5 numeri)
                self.assertTrue(self.cartella_default.verifica_cinquina_riga(riga_test), f"La riga {riga_test} dovrebbe avere la cinquina con 5 numeri segnati")
                break  # Esce dopo aver testato la prima riga valida
        else:
            # Se nessuna riga ha 5 numeri, salta il test (caso limite accettabile)
            print("Nota: Nessuna riga ha 5 numeri per testare la cinquina al 100%")

        # TEST 4: Verifica che solleva un'eccezione con numero di riga non valido
        with self.assertRaises(ValueError) as context:
            self.cartella_default.verifica_cinquina_riga(5)
        self.assertIn("numero_riga deve essere tra", str(context.exception), "L'eccezione dovrebbe contenere il messaggio corretto")
        with self.assertRaises(ValueError):
            self.cartella_default.verifica_cinquina_riga(-1)


    #metodo per testare il metodo verifica_cartella_completa
    def test_verifica_cartella_completa(self):
        # Verifica che inizialmente la cartella NON Ã¨ completa (0 numeri segnati)
        self.assertFalse(self.cartella_default.verifica_cartella_completa(), "Inizialmente la cartella non dovrebbe essere completa")
        # Ottiene TUTTI i numeri della cartella
        tutti_numeri = self.cartella_default.get_numeri_cartella()

        # TEST 1: Segna solo 14 numeri â†’ NON completa
        for i in range(14):
            self.cartella_default.segna_numero(tutti_numeri[i])
        self.assertFalse(self.cartella_default.verifica_cartella_completa(), "Con 14 numeri segnati NON Ã¨ tombola")

        # TEST 2: Segna l'ULTIMO numero â†’ COMPLETA!
        self.cartella_default.segna_numero(tutti_numeri[14])
        self.assertTrue(self.cartella_default.verifica_cartella_completa(), "Con TUTTI i 15 numeri segnati Ã¨ TOMBOLA!")

        # TEST 3: Reset â†’ NON completa
        self.cartella_default.reset_cartella()
        self.assertFalse(self.cartella_default.verifica_cartella_completa(), "Dopo reset NON Ã¨ tombola")

        # TEST 4: Segna numero non presente â†’ NON influisce
        self.cartella_default.segna_numero(91)  # Numero fuori cartella
        self.assertFalse(self.cartella_default.verifica_cartella_completa(), "Numero non presente non completa la cartella")



if __name__ == '__main__':
    unittest.main()